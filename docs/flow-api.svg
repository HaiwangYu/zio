<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1167px" preserveAspectRatio="none" style="width:331px;height:1167px;" version="1.1" viewBox="0 0 331 1167" width="331px" zoomAndPan="magnify"><defs><filter height="300%" id="f6w0gxkdwq3so" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="208" x="57" y="26.708">ZIO Flow API Sequence</text><rect fill="#FFFFFF" filter="url(#f6w0gxkdwq3so)" height="1013.1172" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="137" y="104.3828"/><rect fill="#FFFFFF" filter="url(#f6w0gxkdwq3so)" height="1034.25" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="272" y="83.25"/><rect fill="#FFFFFF" filter="url(#f6w0gxkdwq3so)" height="117.5313" style="stroke: #000000; stroke-width: 2.0;" width="211" x="13" y="366.4453"/><rect fill="#FFFFFF" filter="url(#f6w0gxkdwq3so)" height="88.3984" style="stroke: #000000; stroke-width: 2.0;" width="199" x="13" y="641.5078"/><rect fill="#FFFFFF" filter="url(#f6w0gxkdwq3so)" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="296" x="13" y="916.5703"/><rect fill="#FFFFFF" filter="url(#f6w0gxkdwq3so)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="197" x="13" y="1064.2344"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="46" x2="46" y1="73.25" y2="1127.5"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="142" x2="142" y1="73.25" y2="1127.5"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="277" x2="277" y1="73.25" y2="1127.5"/><rect fill="#FEFECE" filter="url(#f6w0gxkdwq3so)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="42" x="23" y="37.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="30" y="57.9482">port</text><rect fill="#FEFECE" filter="url(#f6w0gxkdwq3so)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="42" x="23" y="1126.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="30" y="1146.4951">port</text><rect fill="#FEFECE" filter="url(#f6w0gxkdwq3so)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="84" y="37.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="91" y="57.9482">zio::flow::Flow</text><rect fill="#FEFECE" filter="url(#f6w0gxkdwq3so)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="84" y="1126.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="91" y="1146.4951">zio::flow::Flow</text><rect fill="#FEFECE" filter="url(#f6w0gxkdwq3so)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="40" x="255" y="37.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="262" y="57.9482">app</text><rect fill="#FEFECE" filter="url(#f6w0gxkdwq3so)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="40" x="255" y="1126.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="262" y="1146.4951">app</text><rect fill="#FFFFFF" filter="url(#f6w0gxkdwq3so)" height="1013.1172" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="137" y="104.3828"/><rect fill="#FFFFFF" filter="url(#f6w0gxkdwq3so)" height="1034.25" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="272" y="83.25"/><polygon fill="#A80036" points="158,100.3828,148,104.3828,158,108.3828,154,104.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="152" x2="271" y1="104.3828" y2="104.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="164" y="99.3169">create(port)</text><polygon fill="#A80036" points="158,129.5156,148,133.5156,158,137.5156,154,133.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="152" x2="271" y1="133.5156" y2="133.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="164" y="128.4497">send_bot()</text><polygon fill="#A80036" points="57,158.6484,47,162.6484,57,166.6484,53,162.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="51" x2="136" y1="162.6484" y2="162.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="63" y="157.5825">send(BOT)</text><polygon fill="#A80036" points="158,187.7813,148,191.7813,158,195.7813,154,191.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="152" x2="271" y1="191.7813" y2="191.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="164" y="186.7153">recv_bot()</text><polygon fill="#A80036" points="57,216.9141,47,220.9141,57,224.9141,53,220.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="51" x2="136" y1="220.9141" y2="220.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="63" y="215.8481">recv(wait)</text><polygon fill="#A80036" points="125,246.0469,135,250.0469,125,254.0469,129,250.0469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="46" x2="131" y1="250.0469" y2="250.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="53" y="244.981">BOT</text><polygon fill="#A80036" points="260,275.1797,270,279.1797,260,283.1797,264,279.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="147" x2="266" y1="279.1797" y2="279.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="154" y="274.1138">BOT</text><rect fill="#EEEEEE" filter="url(#f6w0gxkdwq3so)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="316" x="3" y="307.7461"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="319" y1="307.7461" y2="307.7461"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="319" y1="310.7461" y2="310.7461"/><rect fill="#EEEEEE" filter="url(#f6w0gxkdwq3so)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="117" x="102.5" y="297.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="98" x="108.5" y="313.2466">sender mode</text><polygon fill="#A80036" points="158,347.4453,148,351.4453,158,355.4453,154,351.4453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="152" x2="271" y1="351.4453" y2="351.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="164" y="346.3794">put(DAT)</text><path d="M13,366.4453 L116,366.4453 L116,373.4453 L106,383.4453 L13,383.4453 L13,366.4453 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="117.5313" style="stroke: #000000; stroke-width: 2.0;" width="211" x="13" y="366.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="58" x="28" y="379.5122">if broke</text><polygon fill="#A80036" points="57,400.7109,47,404.7109,57,408.7109,53,404.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="51" x2="136" y1="404.7109" y2="404.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="63" y="399.645">recv(wait)</text><polygon fill="#A80036" points="125,429.8438,135,433.8438,125,437.8438,129,433.8438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="46" x2="131" y1="433.8438" y2="433.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="53" y="428.7778">PAY</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="147" x2="189" y1="462.9766" y2="462.9766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="189" x2="189" y1="462.9766" y2="475.9766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="148" x2="189" y1="475.9766" y2="475.9766"/><polygon fill="#A80036" points="158,471.9766,148,475.9766,158,479.9766,154,475.9766" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="154" y="457.9106">++credit</text><polygon fill="#A80036" points="57,508.1094,47,512.1094,57,516.1094,53,512.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="51" x2="136" y1="512.1094" y2="512.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="63" y="507.0435">send(DAT)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="147" x2="189" y1="541.2422" y2="541.2422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="189" x2="189" y1="541.2422" y2="554.2422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="148" x2="189" y1="554.2422" y2="554.2422"/><polygon fill="#A80036" points="158,550.2422,148,554.2422,158,558.2422,154,554.2422" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="154" y="536.1763">--credit</text><rect fill="#EEEEEE" filter="url(#f6w0gxkdwq3so)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="316" x="3" y="582.8086"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="319" y1="582.8086" y2="582.8086"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="319" y1="585.8086" y2="585.8086"/><rect fill="#EEEEEE" filter="url(#f6w0gxkdwq3so)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="112" x="105" y="572.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="93" x="111" y="588.3091">recver mode</text><polygon fill="#A80036" points="158,622.5078,148,626.5078,158,630.5078,154,626.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="152" x2="271" y1="626.5078" y2="626.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="164" y="621.4419">get(DAT&amp;, wait)</text><path d="M13,641.5078 L100,641.5078 L100,648.5078 L90,658.5078 L13,658.5078 L13,641.5078 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="88.3984" style="stroke: #000000; stroke-width: 2.0;" width="199" x="13" y="641.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="28" y="654.5747">if rich</text><polygon fill="#A80036" points="57,675.7734,47,679.7734,57,683.7734,53,679.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="51" x2="136" y1="679.7734" y2="679.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="63" y="674.7075">send(PAY)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="147" x2="189" y1="708.9063" y2="708.9063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="189" x2="189" y1="708.9063" y2="721.9063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="148" x2="189" y1="721.9063" y2="721.9063"/><polygon fill="#A80036" points="158,717.9063,148,721.9063,158,725.9063,154,721.9063" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="154" y="703.8403">--credit</text><polygon fill="#A80036" points="57,754.0391,47,758.0391,57,762.0391,53,758.0391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="51" x2="136" y1="758.0391" y2="758.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="63" y="752.9731">recv(wait)</text><polygon fill="#A80036" points="125,783.1719,135,787.1719,125,791.1719,129,787.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="46" x2="131" y1="787.1719" y2="787.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="53" y="782.106">DAT</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="147" x2="189" y1="816.3047" y2="816.3047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="189" x2="189" y1="816.3047" y2="829.3047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="148" x2="189" y1="829.3047" y2="829.3047"/><polygon fill="#A80036" points="158,825.3047,148,829.3047,158,833.3047,154,829.3047" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="154" y="811.2388">++credit;</text><polygon fill="#A80036" points="260,854.4375,270,858.4375,260,862.4375,264,858.4375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="147" x2="266" y1="858.4375" y2="858.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="154" y="853.3716">DAT</text><rect fill="#EEEEEE" filter="url(#f6w0gxkdwq3so)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="316" x="3" y="887.0039"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="319" y1="887.0039" y2="887.0039"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="319" y1="890.0039" y2="890.0039"/><rect fill="#EEEEEE" filter="url(#f6w0gxkdwq3so)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="109" x="106.5" y="876.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="112.5" y="892.5044">either mode</text><path d="M13,916.5703 L156,916.5703 L156,923.5703 L146,933.5703 L13,933.5703 L13,916.5703 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="296" x="13" y="916.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="98" x="28" y="929.6372">we terminate</text><polygon fill="#A80036" points="158,950.8359,148,954.8359,158,958.8359,154,954.8359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="152" x2="271" y1="954.8359" y2="954.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="164" y="949.77">eot(wait)</text><polygon fill="#A80036" points="57,979.9688,47,983.9688,57,987.9688,53,983.9688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="51" x2="136" y1="983.9688" y2="983.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="63" y="978.9028">send(EOT)</text><polygon fill="#A80036" points="57,1009.1016,47,1013.1016,57,1017.1016,53,1013.1016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="51" x2="136" y1="1013.1016" y2="1013.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="63" y="1008.0356">recv(wait)</text><polygon fill="#A80036" points="125,1038.2344,135,1042.2344,125,1046.2344,129,1042.2344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="46" x2="131" y1="1042.2344" y2="1042.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="53" y="1037.1685">EOT</text><path d="M13,1064.2344 L167,1064.2344 L167,1071.2344 L157,1081.2344 L13,1081.2344 L13,1064.2344 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="197" x="13" y="1064.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="109" x="28" y="1077.3013">they terminate</text><polygon fill="#A80036" points="125,1098.5,135,1102.5,125,1106.5,129,1102.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="46" x2="131" y1="1102.5" y2="1102.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="53" y="1097.4341">EOT</text><!--MD5=[9c48c83c0fe736b93c9c6ddd441e9b8e]
@startuml
title ZIO Flow API Sequence
participant "port" as port
participant "zio::flow::Flow" as cc
participant app
activate app
        app -> cc : create(port)
        activate cc
                app -> cc : send_bot()
                cc -> port : send(BOT)
                app -> cc : recv_bot()
                cc -> port : recv(wait)
                port -> cc : BOT
                cc -> app : BOT

                == sender mode ==

                app -> cc : put(DAT)
                group if broke
                        cc -> port : recv(wait)
                        port -> cc : PAY
                        cc -> cc : ++credit
                end
                cc -> port : send(DAT)
                cc -> cc : - -credit

                == recver mode ==

                app -> cc : get(DAT&, wait)
                group if rich
                        cc -> port : send(PAY)
                        cc -> cc : - -credit
                end
                cc -> port : recv(wait)
                port -> cc : DAT
                cc -> cc : ++credit;
                cc -> app : DAT

                == either mode == 

                group we terminate
                        app -> cc : eot(wait)
                        cc -> port : send(EOT)
                        cc -> port : recv(wait)
                        port -> cc : EOT
                end
                group they terminate
                        port -> cc : EOT
                end

        deactivate cc
deactivate app
@enduml

PlantUML version 1.2020.01(Sun Feb 16 12:40:32 EST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.6+10-post-Ubuntu-1ubuntu118.04.1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>