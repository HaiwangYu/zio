<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ZIO: zio.flow.factories.Ruleset Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ZIO
   </div>
   <div id="projectbrief">Python and C++ interface to ZeroMQ and Zyre</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d1/dad/namespacezio.html">zio</a></li><li class="navelem"><a class="el" href="../../df/de9/namespacezio_1_1flow.html">flow</a></li><li class="navelem"><a class="el" href="../../d4/d9d/namespacezio_1_1flow_1_1factories.html">factories</a></li><li class="navelem"><a class="el" href="../../dc/d00/classzio_1_1flow_1_1factories_1_1_ruleset.html">Ruleset</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="../../d0/d05/classzio_1_1flow_1_1factories_1_1_ruleset-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">zio.flow.factories.Ruleset Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:adfbdcd5a60a010c6bf22af6cd9bf59f3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d00/classzio_1_1flow_1_1factories_1_1_ruleset.html#adfbdcd5a60a010c6bf22af6cd9bf59f3">__init__</a> (self, <a class="el" href="../../dc/d00/classzio_1_1flow_1_1factories_1_1_ruleset.html#a0b3704dc0ebd1d66832b45284c62cf03">ctx</a>, <a class="el" href="../../dc/d00/classzio_1_1flow_1_1factories_1_1_ruleset.html#a0b407a45ace443396954212757d64469">ruleset</a>, <a class="el" href="../../dc/d00/classzio_1_1flow_1_1factories_1_1_ruleset.html#a0854f90af9c35dae98fc0c4886b0b7e9">wactors</a>=(), <a class="el" href="../../dc/d00/classzio_1_1flow_1_1factories_1_1_ruleset.html#ac0526c24209ef3e9402de7847aad7465">ractor</a>=())</td></tr>
<tr class="separator:adfbdcd5a60a010c6bf22af6cd9bf59f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a409583455e9f7ab5e9baa50605605b82"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d00/classzio_1_1flow_1_1factories_1_1_ruleset.html#a409583455e9f7ab5e9baa50605605b82">__call__</a> (self, bot)</td></tr>
<tr class="separator:a409583455e9f7ab5e9baa50605605b82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ce690b786026d4a49c5a30eedd578c6"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d00/classzio_1_1flow_1_1factories_1_1_ruleset.html#a5ce690b786026d4a49c5a30eedd578c6">launch_read</a> (self, filename, bot, rule)</td></tr>
<tr class="separator:a5ce690b786026d4a49c5a30eedd578c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab9fa055efd8f54943934786e80a8f51"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d00/classzio_1_1flow_1_1factories_1_1_ruleset.html#aab9fa055efd8f54943934786e80a8f51">launch_write</a> (self, filename, bot, rule)</td></tr>
<tr class="separator:aab9fa055efd8f54943934786e80a8f51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d5a1031264f460d8632816d591dc4a5"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d00/classzio_1_1flow_1_1factories_1_1_ruleset.html#a3d5a1031264f460d8632816d591dc4a5">stop</a> (self)</td></tr>
<tr class="separator:a3d5a1031264f460d8632816d591dc4a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a0b3704dc0ebd1d66832b45284c62cf03"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d00/classzio_1_1flow_1_1factories_1_1_ruleset.html#a0b3704dc0ebd1d66832b45284c62cf03">ctx</a></td></tr>
<tr class="separator:a0b3704dc0ebd1d66832b45284c62cf03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b407a45ace443396954212757d64469"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d00/classzio_1_1flow_1_1factories_1_1_ruleset.html#a0b407a45ace443396954212757d64469">ruleset</a></td></tr>
<tr class="separator:a0b407a45ace443396954212757d64469"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0854f90af9c35dae98fc0c4886b0b7e9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d00/classzio_1_1flow_1_1factories_1_1_ruleset.html#a0854f90af9c35dae98fc0c4886b0b7e9">wactors</a></td></tr>
<tr class="separator:a0854f90af9c35dae98fc0c4886b0b7e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0526c24209ef3e9402de7847aad7465"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d00/classzio_1_1flow_1_1factories_1_1_ruleset.html#ac0526c24209ef3e9402de7847aad7465">ractor</a></td></tr>
<tr class="separator:ac0526c24209ef3e9402de7847aad7465"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80a194311699695ad0b298d4e1c05018"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d00/classzio_1_1flow_1_1factories_1_1_ruleset.html#a80a194311699695ad0b298d4e1c05018">writers</a></td></tr>
<tr class="separator:a80a194311699695ad0b298d4e1c05018"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f2af1799b80700f1f223c66f95138a9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d00/classzio_1_1flow_1_1factories_1_1_ruleset.html#a1f2af1799b80700f1f223c66f95138a9">handlers</a></td></tr>
<tr class="separator:a1f2af1799b80700f1f223c66f95138a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Use a ruleset to mate flow client to a file resource.

The ruleset factory will apply each rule in the set and used the
first one that evaluates True.  This will govern the parameters
for the file resource.

The file resource is delegated to a pair of actor functions for
reading and another for writing.  A single reader/writer actor is
launched to handle each new file and a reader or writer handler is
used to handle each new client.</pre> 
<p class="definition">Definition at line <a class="el" href="../../d2/df0/factories_8py_source.html#l00018">18</a> of file <a class="el" href="../../d2/df0/factories_8py_source.html">factories.py</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="adfbdcd5a60a010c6bf22af6cd9bf59f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfbdcd5a60a010c6bf22af6cd9bf59f3">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def zio.flow.factories.Ruleset.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ruleset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>wactors</em> = <code>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ractor</em> = <code>()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Create a Factory with a ruleset.

Parameters
----------

ctx : a zmq.Context

ruleset: array of dictionary

    A ruleset is a sequence of rule specifications (see Rule
    Attributes below).

wactors : 2-tuple of 2-tuples specifing file writing actors 

    See below.

ractor : 2-tuple specifying file reading actors and any args

    See below

The "*actors" args are 2-tuples specifying actor functions and
optional user data arguments for writing and reading.

The head of the 2-tuple is for the file actor which directly
manages some file resource.  The tail is for the client actor
which will connect to the file actor socket (and presumably
some other socket).  If either element of this 2-tuple is
itself a tuple then the head is treated as the actor function
and any remainder is passed to the function as user data
arguments.

A file actor is called as:

    file_handler(ctx, pipe, 
         filename,
         *user_data):

The file actor function must adhere to a simple protocol on
its actor pipe.  After issuing the usual actor ready signal
and before entering its loop, the file actor shall return on
its actor pipe as a string the address of a bound socket to
which any subsequent client actors may connect.

A client actor is called as:

    client_handler(ctx, pipe, 
           bot, rule_object, file_addr, 
           *user_data)

The client actor has no protocol on its actor pipe other than
the usual ready signal.

Rule Attributes
---------------

rule : string

    An S-expression in terms of attributes evaluating to a
    Boolean.  First rule returning True is used.  Here and
    below "attributes" refer to the combination of BOT message
    header values and any additional specified in the `attr`
    Rule Attribute (described below).

rw : string 

    Takes value "read" or "write" and determines if the flow
    is to be read from or written to file.

filepat : f-string

    An f-string formatted against the attributes which
    resolves to the name of the file to be read or written.

grouppat : f-string

    An f-string formatted against attributes to determine and
    to add a "hdfgroup" parameter to the BOT message prior to
    it being sent into a read or write handler.  The value
    will be used to define an HDF base group path into which
    messages from one stream will be mapped.  This path must
    be unique to the flow client.

attr : dictionary

    An optional, extra dictionary of attributes updated on the
    dictionary of message attributes prior to applying to the
    rule or either patterns.</pre> 
<p class="definition">Definition at line <a class="el" href="../../d2/df0/factories_8py_source.html#l00033">33</a> of file <a class="el" href="../../d2/df0/factories_8py_source.html">factories.py</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a409583455e9f7ab5e9baa50605605b82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a409583455e9f7ab5e9baa50605605b82">&#9670;&nbsp;</a></span>__call__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def zio.flow.factories.Ruleset.__call__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Given a bot, return a live actor or None if bot is rejected.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d2/df0/factories_8py_source.html#l00131">131</a> of file <a class="el" href="../../d2/df0/factories_8py_source.html">factories.py</a>.</p>

</div>
</div>
<a id="a5ce690b786026d4a49c5a30eedd578c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ce690b786026d4a49c5a30eedd578c6">&#9670;&nbsp;</a></span>launch_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def zio.flow.factories.Ruleset.launch_read </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>rule</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/df0/factories_8py_source.html#l00160">160</a> of file <a class="el" href="../../d2/df0/factories_8py_source.html">factories.py</a>.</p>

</div>
</div>
<a id="aab9fa055efd8f54943934786e80a8f51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab9fa055efd8f54943934786e80a8f51">&#9670;&nbsp;</a></span>launch_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def zio.flow.factories.Ruleset.launch_write </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>rule</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/df0/factories_8py_source.html#l00172">172</a> of file <a class="el" href="../../d2/df0/factories_8py_source.html">factories.py</a>.</p>

</div>
</div>
<a id="a3d5a1031264f460d8632816d591dc4a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d5a1031264f460d8632816d591dc4a5">&#9670;&nbsp;</a></span>stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def zio.flow.factories.Ruleset.stop </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/df0/factories_8py_source.html#l00198">198</a> of file <a class="el" href="../../d2/df0/factories_8py_source.html">factories.py</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a0b3704dc0ebd1d66832b45284c62cf03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b3704dc0ebd1d66832b45284c62cf03">&#9670;&nbsp;</a></span>ctx</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zio.flow.factories.Ruleset.ctx</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/df0/factories_8py_source.html#l00123">123</a> of file <a class="el" href="../../d2/df0/factories_8py_source.html">factories.py</a>.</p>

</div>
</div>
<a id="a1f2af1799b80700f1f223c66f95138a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f2af1799b80700f1f223c66f95138a9">&#9670;&nbsp;</a></span>handlers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zio.flow.factories.Ruleset.handlers</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/df0/factories_8py_source.html#l00128">128</a> of file <a class="el" href="../../d2/df0/factories_8py_source.html">factories.py</a>.</p>

</div>
</div>
<a id="ac0526c24209ef3e9402de7847aad7465"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0526c24209ef3e9402de7847aad7465">&#9670;&nbsp;</a></span>ractor</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zio.flow.factories.Ruleset.ractor</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/df0/factories_8py_source.html#l00126">126</a> of file <a class="el" href="../../d2/df0/factories_8py_source.html">factories.py</a>.</p>

</div>
</div>
<a id="a0b407a45ace443396954212757d64469"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b407a45ace443396954212757d64469">&#9670;&nbsp;</a></span>ruleset</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zio.flow.factories.Ruleset.ruleset</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/df0/factories_8py_source.html#l00124">124</a> of file <a class="el" href="../../d2/df0/factories_8py_source.html">factories.py</a>.</p>

</div>
</div>
<a id="a0854f90af9c35dae98fc0c4886b0b7e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0854f90af9c35dae98fc0c4886b0b7e9">&#9670;&nbsp;</a></span>wactors</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zio.flow.factories.Ruleset.wactors</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/df0/factories_8py_source.html#l00125">125</a> of file <a class="el" href="../../d2/df0/factories_8py_source.html">factories.py</a>.</p>

</div>
</div>
<a id="a80a194311699695ad0b298d4e1c05018"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80a194311699695ad0b298d4e1c05018">&#9670;&nbsp;</a></span>writers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zio.flow.factories.Ruleset.writers</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/df0/factories_8py_source.html#l00127">127</a> of file <a class="el" href="../../d2/df0/factories_8py_source.html">factories.py</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>python/zio/flow/<a class="el" href="../../d2/df0/factories_8py_source.html">factories.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
