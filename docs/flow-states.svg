<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="481px" preserveAspectRatio="none" style="width:1005px;height:481px;" version="1.1" viewBox="0 0 1005 481" width="1005px" zoomAndPan="magnify"><defs><filter height="300%" id="f1vo1huzr2jrs8" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="178" x="416.5" y="16.708">ZIO data flow states</text><ellipse cx="16" cy="229.4531" fill="#000000" filter="url(#f1vo1huzr2jrs8)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1vo1huzr2jrs8)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="63" x="138" y="161.4531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="138" x2="201" y1="187.75" y2="187.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="148" y="179.4482">server</text><rect fill="#FEFECE" filter="url(#f1vo1huzr2jrs8)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="57" x="141" y="246.4531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="141" x2="198" y1="272.75" y2="272.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="151" y="264.4482">client</text><rect fill="#FEFECE" filter="url(#f1vo1huzr2jrs8)" height="203.2969" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="488" x="501.5" y="28.9531"/><rect fill="#FFFFFF" height="171" rx="12.5" ry="12.5" style="stroke: #FFFFFF; stroke-width: 1.0;" width="482" x="504.5" y="58.25"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="501.5" x2="989.5" y1="55.25" y2="55.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="717.5" y="46.9482">sending</text><ellipse cx="531.5" cy="183.3594" fill="#000000" filter="url(#f1vo1huzr2jrs8)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1vo1huzr2jrs8)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="80" x="578.5" y="158.3594"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="578.5" x2="658.5" y1="184.6563" y2="184.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="588.5" y="176.3545">cansend</text><rect fill="#FEFECE" filter="url(#f1vo1huzr2jrs8)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="60" x="896.5" y="158.3594"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="896.5" x2="956.5" y1="184.6563" y2="184.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="906.5" y="176.3545">broke</text><!--MD5=[5570a4cd06b7ad77d8bacf584797d143]
link *start*sending to cansend--><path d="M541.8217,183.3594 C549.7773,183.3594 561.3781,183.3594 573.1593,183.3594 " fill="none" id="*start*sending-&gt;cansend" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="578.2093,183.3594,569.2093,179.3594,573.2093,183.3594,569.2093,187.3594,578.2093,183.3594" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[dc7f92d143c75b076e3d327299c30c35]
link cansend to broke--><path d="M658.7656,183.3594 C719.5465,183.3594 833.7327,183.3594 891.3478,183.3594 " fill="none" id="cansend-&gt;broke" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="896.4069,183.3594,887.4069,179.3594,891.4069,183.3594,887.4069,187.3594,896.4069,183.3594" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="677.5" y="179.4263">DAT [cred=1] / send_dat;--cred</text><!--MD5=[6bc598e2773b8b698477a770868df247]
link cansend to cansend--><path d="M613.0837,158.1838 C612.843,148.4499 614.6484,140.3594 618.5,140.3594 C621.6294,140.3594 623.408,145.7004 623.8359,152.9243 " fill="none" id="cansend-&gt;cansend" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="623.9163,158.1838,627.7783,149.1237,623.8399,153.1844,619.7792,149.246,623.9163,158.1838" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="518.5" y="131.4263">DAT [cred&gt;1] / send_dat;--cred</text><!--MD5=[9bb80e84b33b6e3a545b582659eaff72]
link broke to cansend--><path d="M896.3967,198.7567 C890.5958,201.0785 884.4652,203.1116 878.5,204.3594 C790.6242,222.7411 764.9269,219.8749 676.5,204.3594 C672.2544,203.6145 667.9101,202.5847 663.6031,201.378 " fill="none" id="broke-&gt;cansend" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="658.5722,199.8866,666.0641,206.2797,663.366,201.3077,668.3379,198.6096,658.5722,199.8866" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="734.5" y="200.4263">PAY / ++cred</text><!--MD5=[6bc598e2773b8b698477a770868df247]
link cansend to cansend--><path d="M609.1543,158.114 C605.416,136.8347 608.5313,113.3594 618.5,113.3594 C627.6899,113.3594 631.0554,133.3099 628.5964,153.0987 " fill="none" id="cansend-&gt;cansend-1" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="627.8457,158.114,633.1339,149.8053,628.5859,153.1691,625.222,148.621,627.8457,158.114" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="575.5" y="104.4263">PAY / ++cred</text><rect fill="#FEFECE" filter="url(#f1vo1huzr2jrs8)" height="203.2969" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="495" x="498" y="266.9531"/><rect fill="#FFFFFF" height="171" rx="12.5" ry="12.5" style="stroke: #FFFFFF; stroke-width: 1.0;" width="489" x="501" y="296.25"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="498" x2="993" y1="293.25" y2="293.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="720.5" y="284.9482">recving</text><ellipse cx="543" cy="367.9512" fill="#000000" filter="url(#f1vo1huzr2jrs8)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1vo1huzr2jrs8)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="68" x="509" y="395.9512"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="509" x2="577" y1="422.2481" y2="422.2481"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="519" y="413.9463">waiting</text><rect fill="#FEFECE" filter="url(#f1vo1huzr2jrs8)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="65" x="819" y="395.9512"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="819" x2="884" y1="422.2481" y2="422.2481"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="829" y="413.9463">gotdat</text><!--MD5=[1663191d5cb0d3f130a648a3725d4aa4]
link *start*recving to waiting--><path d="M543,378.3545 C543,382.4183 543,386.4821 543,390.5459 " fill="none" id="*start*recving-&gt;waiting" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="543,395.6934,547,386.6934,543,390.6934,539,386.6934,543,395.6934" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[146eedf8756d1b93440ec35cd35acc85]
link waiting to gotdat--><path d="M577.1936,420.9512 C635.2132,420.9512 752.5392,420.9512 813.2197,420.9512 " fill="none" id="waiting-&gt;gotdat" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="818.5559,420.9512,809.5559,416.9512,813.5559,420.9512,809.5559,424.9512,818.5559,420.9512" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="652" y="417.0181">DAT / ++cred;</text><!--MD5=[df3e92387162bfcd6c8b7240b1d1eb23]
link gotdat to gotdat--><path d="M837.3057,395.7756 C836.6748,386.0417 841.4063,377.9512 851.5,377.9512 C859.7012,377.9512 864.3624,383.2922 865.4836,390.5161 " fill="none" id="gotdat-&gt;gotdat" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="865.6943,395.7756,869.3308,386.6227,865.4942,390.7796,861.3372,386.9429,865.6943,395.7756" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="805.5" y="369.0181">DAT / ++cred;</text><!--MD5=[df3e92387162bfcd6c8b7240b1d1eb23]
link gotdat to gotdat--><path d="M827.0078,395.7058 C817.2109,374.4264 825.375,350.9512 851.5,350.9512 C875.686,350.9512 884.4783,371.0712 877.8767,390.942 " fill="none" id="gotdat-&gt;gotdat-1" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="875.9922,395.7058,883.0226,388.8085,877.8316,391.0564,875.5836,385.8654,875.9922,395.7058" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="749.5" y="342.0181">PAY [cred&gt;1] / send_pay;--cred;</text><!--MD5=[28556b90a2f6f9e9f9caf0092be5b464]
link gotdat to waiting--><path d="M818.947,436.6623 C813.0953,438.8542 806.9593,440.7615 801,441.9512 C711.2161,459.8751 684.8748,459.4139 595,441.9512 C590.741,441.1237 586.389,439.9479 582.1056,438.5702 " fill="none" id="gotdat-&gt;waiting" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="577.1184,436.869,584.345,443.5605,581.8506,438.4833,586.9279,435.9889,577.1184,436.869" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="596" y="438.0181">PAY [cred=1] / send_pay;--cred;</text><!--MD5=[ba72cd3673ce64c39055fe5124c10938]
link *start to server--><path d="M26.0716,226.6317 C47.3682,220.6659 97.8833,206.5151 132.8916,196.7082 " fill="none" id="*start-&gt;server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="137.9389,195.2943,128.1935,193.8703,133.1242,196.6431,130.3515,201.5738,137.9389,195.2943" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="57" y="200.52">SERVER</text><!--MD5=[40c59a142c0593b438c412a7e7eb8ed5]
link *start to client--><path d="M24.1073,235.6016 C31.8709,241.1672 44.1272,249.1347 56,253.4531 C81.798,262.8365 112.6523,267.333 135.6751,269.4852 " fill="none" id="*start-&gt;client" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="140.7588,269.9344,132.1459,265.1577,135.7782,269.4943,131.4416,273.1266,140.7588,269.9344" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="60" y="249.52">CLIENT</text><!--MD5=[713a861561be11396d65c647fbec87ed]
link server to sending--><path d="M201.3102,179.5709 C210.8241,177.6956 221.3038,175.8097 231,174.4531 C317.1797,162.3958 411.9745,153.1562 496.4616,146.331 " fill="none" id="server-&gt;sending" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="501.4982,145.926,492.2065,142.6605,496.5143,146.3269,492.8479,150.6347,501.4982,145.926" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="237.5" y="146.52">BOT [dir=inject] / set_bot;send_bot</text><!--MD5=[9256739a6461b6b7acf43f48672b8d19]
link server to recving--><path d="M201.0341,193.4829 C210.6333,195.5245 221.2288,197.6798 231,199.4531 C335.8292,218.478 366.1805,204.086 468,235.4531 C469.2216,235.8294 494.5332,247.8767 529.4164,264.5804 " fill="none" id="server-&gt;recving" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="534.1715,266.8578,527.7822,259.3627,529.662,264.6981,524.3266,266.5779,534.1715,266.8578" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="235" x="232" y="195.52">BOT [dir=extract] / set_bot;send_bot</text><!--MD5=[95a06427ac2dd347c28f52f594aae340]
link client to recving--><path d="M193.5983,296.6428 C204.1407,306.0712 217.2369,315.8462 231,321.4531 C312.4438,354.6325 406.9722,369.2909 492.6158,374.7484 " fill="none" id="client-&gt;recving" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="497.7231,375.0637,488.9867,370.5167,492.7326,374.7556,488.4937,378.5015,497.7231,375.0637" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="237.5" y="317.52">BOT [dir=inject] / set_bot;send_bot</text><!--MD5=[9a19d8365eab9ce89450666f8b20e35f]
link client to sending--><path d="M198.4092,273.5416 C252.3099,276.6619 371.4399,279.9003 468,256.4531 C491.8605,250.6592 516.1892,242.8254 540.0322,233.8817 " fill="none" id="client-&gt;sending" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="544.7941,232.0785,534.9608,231.5253,540.1182,233.8493,537.7941,239.0067,544.7941,232.0785" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="235" x="232" y="252.52">BOT [dir=extract] / set_bot;send_bot</text><!--MD5=[9daf944714b1914063ecb296de1200f0]
@startuml
left to right direction
title ZIO data flow states
[*] - -> server : SERVER
[*] - -> client : CLIENT
server - -> sending : BOT [dir=inject] / set_bot;send_bot
server - -> recving : BOT [dir=extract] / set_bot;send_bot
client - -> recving : BOT [dir=inject] / set_bot;send_bot
client - -> sending : BOT [dir=extract] / set_bot;send_bot
state sending {
        [*] - -> cansend
        cansend - -> broke : DAT [cred=1] / send_dat;- -cred
        cansend -> cansend : DAT [cred>1] / send_dat;- -cred
        broke - -> cansend : PAY / ++cred
        cansend -> cansend : PAY / ++cred
}
state recving {
        [*] -> waiting
        waiting - -> gotdat : DAT / ++cred;
        gotdat -> gotdat : DAT / ++cred;
        gotdat -> gotdat : PAY [cred>1] / send_pay;- -cred;
        gotdat - -> waiting : PAY [cred=1] / send_pay;- -cred;
}



@enduml

PlantUML version 1.2020.01(Sun Feb 16 12:40:32 EST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_242-8u242-b08-0ubuntu3~18.04-b08
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>